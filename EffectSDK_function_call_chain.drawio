<mxfile host="app.diagrams.net" modified="2020-10-09T04:08:57.456Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.106 Safari/537.36" etag="v7dk2ST--myRSWIKduL_" version="13.7.4" type="github">
  <diagram id="S2lVZ_AY6D0ffEM8kNPP" name="Page-1">
    <mxGraphModel dx="4008" dy="1963" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="UD57GQTYyrQhU4ycjeV2-7" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1400" y="2050" width="340" height="432" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-205" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#82b366;strokeWidth=5;fillColor=#d5e8d4;" parent="1" vertex="1">
          <mxGeometry x="-535" y="481" width="360" height="318" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-184" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#d79b00;fillColor=#ffe6cc;" parent="1" vertex="1">
          <mxGeometry x="1070" y="965" width="260" height="345" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-130" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFCC;" parent="1" vertex="1">
          <mxGeometry x="358" y="2440" width="632" height="280" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-129" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFCC;" parent="1" vertex="1">
          <mxGeometry x="-445" y="965" width="270" height="90" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-82" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;shape=link;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-80" target="6P7k_oFCu2A5ri-oF5Yv-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-80" value="&lt;span&gt;为当前effect 解析config.json获取的links 逐一构建feature&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="290" y="1690" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-7" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-115" y="-10" width="470" height="330" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-8" value="1.创建effect句柄&lt;br&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;bef_effect_create_handle&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="25" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-10" value="VE接口" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-90" y="25" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-12" value="2.设置opengl版本&lt;br&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;bef_effect_set_render_api&lt;/span&gt;&lt;span style=&quot;color: rgba(0 , 0 , 0 , 0) ; font-family: monospace ; font-size: 0px&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%221.%E5%88%9B%E5%BB%BAeffect%E5%8F%A5%E6%9F%84%26lt%3Bbr%26gt%3B%26lt%3Bspan%20style%3D%26quot%3Bfont-family%3A%20%26amp%3B%2334%3Bhelvetica%26amp%3B%2334%3B%26quot%3B%26gt%3Bbef_effect_create_handle%26lt%3B%2Fspan%26gt%3B%22%20style%3D%22rounded%3D0%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%22280%22%20y%3D%22210%22%20width%3D%22180%22%20height%3D%2240%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="75" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-13" value="3.是否使用并行框架&lt;br&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;bef_effect_use_pipeline_processor&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="135" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-14" value="4.初始化实例及设置资源路径&lt;br&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;bef_effect_create_handle&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="5" y="185" width="260" height="70" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-15" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-120" y="470" width="470" height="350" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-16" value="渲染" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-95" y="500" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-17" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="520" y="470" width="470" height="350" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-18" value="事件" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="550" y="500" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-19" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="520" y="-10" width="470" height="330" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-20" value="lua接口" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="540" y="30" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-21" value="4.初始化实例及设置资源路径&lt;br&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;bef_effect_create_handle&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-40" y="500" width="260" height="70" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-69" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="wtXymxYHKPod9JYcDsyk-24" target="wtXymxYHKPod9JYcDsyk-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-24" value="&lt;br&gt;bef_effect_process_textrue_with_native_buffer&lt;br&gt;VE API::&lt;br&gt;参数：effect handle, src/des texture buffer" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="30" y="1000" width="300" height="70" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-70" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="wtXymxYHKPod9JYcDsyk-25" target="wtXymxYHKPod9JYcDsyk-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-25" value="processTexture&lt;br&gt;EffectManager::&lt;br&gt;参数：src/des native buffer; ProcessInfo* frame_data=nullptr" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="30" y="1090" width="300" height="70" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-144" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="wtXymxYHKPod9JYcDsyk-26" target="zsSVkJPb638QE2jcnx0w-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="480" y="1200" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-26" value="_processTexture&lt;br&gt;EffectManager::&lt;br&gt;参数：src/des native buffer; displayWidth; displayHeight; rotation; CBundle&amp;amp; renderInfo" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="30" y="1190" width="300" height="70" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="wtXymxYHKPod9JYcDsyk-27" target="wtXymxYHKPod9JYcDsyk-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-27" value="processTexture&lt;br&gt;RenderManager::&lt;br&gt;参数：src/des native buffer; displayWidth; displayHeight; rotation; renderInfo" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="30" y="1310" width="300" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" parent="1" source="wtXymxYHKPod9JYcDsyk-28" target="wtXymxYHKPod9JYcDsyk-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-109" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-104" target="6P7k_oFCu2A5ri-oF5Yv-103" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-28" value="prepareEffectResV2&lt;br&gt;RenderManager::&lt;br&gt;参数：imageWidth, imageHeight, orientation&lt;br&gt;准备重构Effect" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="30" y="1440" width="300" height="70" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="wtXymxYHKPod9JYcDsyk-29" target="wtXymxYHKPod9JYcDsyk-41" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="1600" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-29" value="buildChainV2&lt;br&gt;RenderManager::&lt;br&gt;参数：imageWidth, imageHeight" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="370" y="1440" width="300" height="70" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-52" style="edgeStyle=orthogonalEdgeStyle;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;rounded=0;" parent="1" source="wtXymxYHKPod9JYcDsyk-33" target="wtXymxYHKPod9JYcDsyk-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-33" value="doRender&lt;br&gt;RenderManager::&lt;br&gt;参数：CBundle&amp;amp; renderInfo" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1080" y="1440" width="300" height="70" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.469;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="wtXymxYHKPod9JYcDsyk-35" target="wtXymxYHKPod9JYcDsyk-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-35" value="draw&lt;br&gt;BEFBaseFeature::&lt;br&gt;参数：CBundle&amp;amp; renderInfo" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1080" y="1590" width="300" height="70" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wtXymxYHKPod9JYcDsyk-36" target="wtXymxYHKPod9JYcDsyk-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-36" value="processNewFrame&lt;br&gt;BEFProtocol &amp;lt;- BEFFilter &amp;lt;-&amp;nbsp;BEFImageProcessFilterV2::&lt;br&gt;参数：CBundle&amp;amp; renderInfo;&amp;nbsp; int textureIdx" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1080" y="1710" width="320" height="70" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wtXymxYHKPod9JYcDsyk-38" target="wtXymxYHKPod9JYcDsyk-74" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-38" value="notifyAllTarget&lt;br&gt;&amp;nbsp;BEFProtocol::&lt;br&gt;参数：CBundle&amp;amp; renderInfo" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1140" y="1830" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.558;entryY=0.028;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="wtXymxYHKPod9JYcDsyk-41" target="wtXymxYHKPod9JYcDsyk-42" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-41" value="RenderManager::m_ShouldRebuildChain &lt;br&gt;== true ? return : next" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="390" y="1620" width="260" height="40" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-42" value="重构渲染链相关" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="453" y="1740" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="wtXymxYHKPod9JYcDsyk-72" target="6P7k_oFCu2A5ri-oF5Yv-1" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-72" value="draw&lt;br&gt;xxxFilter::&lt;br&gt;参数：CBundle&amp;amp; renderInfo" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1150" y="2130" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-78" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="wtXymxYHKPod9JYcDsyk-73" target="wtXymxYHKPod9JYcDsyk-72" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-73" value="processNewFrame&lt;br&gt;BEFFilter::&lt;br&gt;参数：CBundle&amp;amp; renderInfo; int textureIdx" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1150" y="2030" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-77" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="wtXymxYHKPod9JYcDsyk-74" target="wtXymxYHKPod9JYcDsyk-73" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="wtXymxYHKPod9JYcDsyk-74" value="notifyAllTargetPure&lt;br&gt;BEFProtocol::&lt;br&gt;参数：CBundle&amp;amp;;&amp;nbsp; Texture*&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1150" y="1930" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-1" value="&lt;font color=&quot;#ff0000&quot;&gt;xxxfeature模块渲染&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1180" y="2227" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-4" value="&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;RenderState：&lt;/span&gt;&lt;span&gt;渲染状态类，定义一次drawcall需要的所有绘制状态。&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;成员变量：&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;ShaderUniformMap m_shaderUniforms（Uniform map）&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;TextureStateArray m_textureStates（纹理array）&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;ProgramPtr m_pProgram （着色器指针）&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;GraphicsState m_graphicsState (图形状态集)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1700" y="2410" width="380" height="120" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-5" value="&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;RenderCommand：&lt;/span&gt;&lt;span&gt;渲染命令，注册一次渲染行为使用的命令，渲染行为需要指明使用的渲染管线，渲染对象(vertexlist/uvlist/vertexindex)和渲染状态（uniform）&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;成员变量：&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;RenderStatePtr m_renderState (渲染状态指针)&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;RenderObjectPtr m_renderObject (渲染对象指针)&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;VertexIndexSourcePtr m_vertexIndexSource(vertexlist, uvlist, vertexindex)&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;RenderPipelinPtr m_renderPipeline (渲染管线指针)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1700" y="2260" width="475" height="140" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-7" value="&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;RenderObject：渲染物体&lt;/span&gt;&lt;span&gt;，渲染时转换为vertexIndexSource。&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;成员变量：&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;BufferDescription m_indexBuffer (顶点描述)&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;VertexIndexsourcePtr m_vertexIndexSource (顶点索引源数据)&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;BufferLayoutDescription m_discription (缓冲布局描述)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1700" y="2550" width="380" height="120" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-8" value="&lt;div style=&quot;text-align: left&quot;&gt;VertexIndexSource：顶点索引源数据，建议通过VertexIndexSourceManager创建。&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;成员变量：&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;std::unordered_map&amp;lt;std::string, AttributeBufferPair&amp;gt; m_AttributeBufferPairs&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;(顶点属性-缓存对 map)&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1700" y="2680" width="460" height="110" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-11" target="6P7k_oFCu2A5ri-oF5Yv-13" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-1360" y="2040" as="sourcePoint" />
            <mxPoint x="-1450.000000000001" y="2127.999999999999" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-11" value="&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(248 , 249 , 250) ; display: inline ; float: none&quot;&gt;&lt;br&gt;FeatureRegisterConfig::registerFeatures&lt;br&gt;初始化（无feature解析行为）并注册所有的feature（xxxFeature::registerFeature)；&lt;br&gt;BEFFeatureFactory::registerFeature&lt;br&gt;注册 feature 到 map 中&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-1487.5" y="1950" width="330" height="90" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-13" value="&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(248 , 249 , 250) ; display: inline ; float: none&quot;&gt;xxxFeature::registerFeature：&lt;br&gt;初始化（无feature解析行为）并注册Filter及Parser&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-1461.25" y="2120" width="277.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-18" target="6P7k_oFCu2A5ri-oF5Yv-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-18" value="&lt;div style=&quot;text-align: center&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;bef_effect_init&lt;/span&gt;&lt;/div&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(248 , 249 , 250) ; display: inline ; float: none&quot;&gt;&lt;div style=&quot;text-align: center&quot;&gt;VE_API::&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;初始化 effect_sdk&lt;/div&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-1062.5" y="1295" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-19" target="6P7k_oFCu2A5ri-oF5Yv-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-19" value="&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;bef_effect_init_with_resource_finder&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;VE_API::&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-1117.5" y="1410" width="210" height="40" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-20" target="6P7k_oFCu2A5ri-oF5Yv-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-90" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-20" target="6P7k_oFCu2A5ri-oF5Yv-91" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-20" value="&lt;div style=&quot;text-align: center&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;init&lt;/span&gt;&lt;/div&gt;&lt;font face=&quot;helvetica&quot;&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;span&gt;EffectManager::&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;span&gt;参数：effect handle, resource_finder,&amp;nbsp; deviceName&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;初始化EffectManager&lt;/div&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-1500" y="1530" width="290" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.435;entryY=-0.017;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-21" target="6P7k_oFCu2A5ri-oF5Yv-24" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-21" value="&lt;div&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;init&lt;/span&gt;&lt;/div&gt;&lt;font face=&quot;helvetica&quot;&gt;&lt;div&gt;RenderManager::&lt;/div&gt;&lt;div&gt;参数：EffectManager, RenderApi ...&lt;/div&gt;&lt;div&gt;初始化RenderManager&lt;/div&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="-1455" y="1670" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-22" target="6P7k_oFCu2A5ri-oF5Yv-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-1322.500000000001" y="1949.999999999999" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-22" value="&lt;div style=&quot;text-align: center&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;registerFeatures&lt;/span&gt;&lt;/div&gt;&lt;font face=&quot;helvetica&quot;&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;span&gt;FeatureRegisterconfig::&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;span&gt;参数：无&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;span&gt;注册所有Features&lt;/span&gt;&lt;/div&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-1385" y="1820" width="125" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-53" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-23" target="6P7k_oFCu2A5ri-oF5Yv-22" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-1385" y="1850" />
              <mxPoint x="-1385" y="1850" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-23" value="&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;createRenderEngine&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;RenderManager::&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;参数：RenderApi&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;创建渲染引擎&lt;/font&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-1552.5" y="1820" width="125" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-24" target="6P7k_oFCu2A5ri-oF5Yv-23" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-1552" y="1850" />
              <mxPoint x="-1552" y="1850" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-24" value="&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;init&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;MessageCenter::&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;参数：无&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;初始化信息中心&lt;/font&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-1710" y="1820" width="125" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-28" target="6P7k_oFCu2A5ri-oF5Yv-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-28" value="&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-style: normal ; letter-spacing: normal ; text-align: left ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; display: inline ; float: none ; background-color: rgb(255 , 255 , 51)&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;&lt;b&gt;一、刚启动effect_sdk，还未选择道具，就完成了所有feature的初始化和注册行为，此外对一些有默认资源包的内置feature不仅初始化还进行了完整构建（相当于进拍摄页就开始执行）&lt;/b&gt;&lt;/font&gt;&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1177" y="1220" width="329.37" height="30" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-34" target="6P7k_oFCu2A5ri-oF5Yv-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-34" value="&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 12px ; font-style: normal ; letter-spacing: normal ; text-align: left ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; display: inline ; float: none ; background-color: rgb(255 , 255 , 51)&quot;&gt;&lt;b&gt;二、选择道具资源包后&lt;/b&gt;&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-810.62" y="1880" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-35" target="6P7k_oFCu2A5ri-oF5Yv-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-35" value="&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;bef_effect_set_sticker_with_tag&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;VE_API::&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;参数：effect handle, u_int stickerId, const char* strPath(资源包路径), int reqId, bool needReload, const char* stickerTag&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;下发资源包&lt;/font&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-875.62" y="1944.5" width="230" height="77.5" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-36" target="6P7k_oFCu2A5ri-oF5Yv-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-36" value="&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;setEffect&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;EffectManager::&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;参数：string&amp;amp; effectPath(资源包路径), u_int stickerId, int reqId, bool needReload, string* stickerTag, BeFError*&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;EffectManager设置资源包特效&lt;/font&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-870.62" y="2062" width="220" height="110" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-37" target="6P7k_oFCu2A5ri-oF5Yv-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-37" value="&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;setEffect&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;RenderManager::&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;参数：string&amp;amp; effectPath(资源包路径), u_int stickerId, int reqId, bool needReload, string* stickerTag, BeFError*&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;RenderManager设置资源包特效&lt;/font&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-870.62" y="2202" width="220" height="110" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-38" target="6P7k_oFCu2A5ri-oF5Yv-40" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-38" value="&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;switchEffect&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;EffectConfigManager::&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;参数：string&amp;amp; effectPath(资源包路径), u_int stickerId, int reqId, bool needReload, string* stickerTag, BeFError*&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;解析资源包并传入m_curEffectConfig&lt;/font&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-870.62" y="2352" width="220" height="110" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-39" value="&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;paser&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;EffectPaser::&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;参数：string&amp;amp; effectPath(资源包路径),&amp;nbsp; BeFError*&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;解析资源包路径/config.json&amp;nbsp;&lt;/font&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-870.62" y="2680" width="220" height="110" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-40" target="6P7k_oFCu2A5ri-oF5Yv-39" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-790.62" y="2562" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-40" value="&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;getEffectConfig&lt;/font&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;EffectConfigManager::&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;参数：string&amp;amp; effectPath(资源包路径), bool needCache, bool readCache,&amp;nbsp; BeFError*&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;&lt;font face=&quot;helvetica&quot;&gt;解析资源包config.json并存入m_EffectConfigs 容器&lt;/font&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-870.62" y="2510" width="220" height="110" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-84" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-50" target="wtXymxYHKPod9JYcDsyk-24" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-50" value="&lt;font face=&quot;helvetica&quot;&gt;&lt;b style=&quot;background-color: rgb(255 , 255 , 0)&quot;&gt;三、VE传入图像(进入拍摄页开始持续)&lt;/b&gt;&lt;/font&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="120" y="900" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="zsSVkJPb638QE2jcnx0w-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-51" target="zsSVkJPb638QE2jcnx0w-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="73" y="1710" />
              <mxPoint x="-558" y="1710" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-51" value="buildEffect&lt;br&gt;BEFEffect::&lt;br&gt;参数：EffectManager, curEffectParam, ViewPort*&amp;nbsp;&lt;br&gt;构建effect，最终会调用xxxfeaturePaser解析资源包" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-77.5" y="1620" width="300" height="70" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-74" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-57" target="6P7k_oFCu2A5ri-oF5Yv-62" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-57" value="addFeature&lt;br&gt;BEFEffect::&lt;br&gt;参数：Path(feature模块包相对路径),&amp;nbsp;&lt;br&gt;构建当前link对应的feature" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-20" y="1769" width="300" height="70" as="geometry" />
        </mxCell>
        <mxCell id="zsSVkJPb638QE2jcnx0w-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-59" target="6P7k_oFCu2A5ri-oF5Yv-57" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-59" value="&lt;font color=&quot;#ff0000&quot;&gt;initWithlua&lt;br&gt;LuaEventBase:: &amp;lt;- BEFEffect&lt;br&gt;参数: EffectManager, EffectPath(资源包路径)&lt;br&gt;解析资源包event.lua文件&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-230" y="1769" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-70" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-62" target="6P7k_oFCu2A5ri-oF5Yv-64" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-62" value="buildFeature&lt;br&gt;BEFFeatureFactory::&lt;br&gt;参数：EffectManager, string&amp;amp; featureName, string&amp;amp; rootPath(资源包路径)， string&amp;amp; relativePath(feature模块包相对路径)&lt;br&gt;构建Feature" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-30" y="1860" width="300" height="100" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-69" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.002;entryY=0.6;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-63" target="6P7k_oFCu2A5ri-oF5Yv-67" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-63" value="&lt;font color=&quot;#ff0000&quot;&gt;initWithlua&lt;br&gt;BEFBaseFeature::&lt;br&gt;参数：Effectmanager, string&amp;amp; featurePath(feature模块包绝对路径)&lt;br&gt;解析feature模块包内event.lua文件（如果有的话）&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="100" y="2020" width="330" height="120" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-64" target="6P7k_oFCu2A5ri-oF5Yv-63" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-64" value="createFeature&lt;br&gt;BEFFeatureFactory::&lt;br&gt;参数：string&amp;amp; featureName&lt;br&gt;effect_sdk初始化时完成了所有feature初始化和注册并存入注册列表，从列表中获取对应feature。&lt;br&gt;注：featureName传参前经历过一次转换，把已废弃的feature名字转换为新的兼容feature名称，如3dv3-&amp;gt;Amazing3dv3" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-250" y="2040" width="330" height="120" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-75" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-67" target="6P7k_oFCu2A5ri-oF5Yv-68" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-186" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-67" target="6P7k_oFCu2A5ri-oF5Yv-185" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-67" value="initWithFile&lt;br&gt;BEFBaseFeature::&lt;br&gt;参数：string&amp;amp; featurePath(feature模块包绝对路径)&lt;br&gt;解析feature内容" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="488.5" y="2020" width="287.5" height="100" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-68" target="6P7k_oFCu2A5ri-oF5Yv-71" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-68" value="Parse&lt;br&gt;BaseParser::&lt;br&gt;参数：string&amp;amp; contentPath(feature模块包content.json文件绝对路径)&lt;br&gt;解析feature模块包content.json文件" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="518.75" y="2160" width="227.5" height="90" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-77" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-71" target="6P7k_oFCu2A5ri-oF5Yv-123" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-71" value="Parse&lt;br&gt;BaseParser::&lt;br&gt;参数：cJSON* (content.json对应json对象)&lt;br&gt;解析feature模块包content.json文件" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="518.75" y="2300" width="227.5" height="90" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-86" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-72" target="6P7k_oFCu2A5ri-oF5Yv-85" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-72" value="ParseContent&lt;br&gt;xxxParser::&lt;br&gt;参数：cJSON* (content.json 中 content 字段内clip.json对象)&lt;br&gt;解析feature模块包content.json文件content字段对应clip.json文件，下沉到xxxfeatureParser." style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="721.25" y="2450" width="227.5" height="110" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-85" value="&lt;font color=&quot;#ff0000&quot;&gt;xxxfeature模块解析，针对每一个feature content.json 文件中content字段表明的clip.json文件进行解析。每个feature模块有所不同。&lt;/font&gt;" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="752.5" y="2602" width="165" height="90" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-92" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;shape=link;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-147" target="6P7k_oFCu2A5ri-oF5Yv-91" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-875.6199999999999" y="1490.0000000000005" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-96" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-91" target="6P7k_oFCu2A5ri-oF5Yv-93" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-91" value="&lt;div style=&quot;text-align: center&quot;&gt;bef_effect_add_feature&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;bef_effect_common&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;参数：effect handle, const char* featureTypes, featureHandle&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;基础及内置feature构建&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-1147.5" y="1510" width="237.5" height="100" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-95" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-97" target="6P7k_oFCu2A5ri-oF5Yv-62" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-700" y="1770" />
              <mxPoint x="-700" y="1910" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-93" value="&lt;div style=&quot;text-align: center&quot;&gt;addFeature&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;EffectManager::&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;参数： const char* featureTypes, featureHandle&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;基础及内置feature构建&lt;/div&gt;&lt;div style=&quot;text-align: center&quot;&gt;EffectManager负责构建内置feature，此函数仅用于内置feature构建，在bef_effect_init过程中执行。&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="-1181.87" y="1720" width="306.25" height="100" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-97" value="内置feature构建不需要资源包路径，bundle里存在默认资源" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-840" y="1765" width="110" height="10" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-98" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-93" target="6P7k_oFCu2A5ri-oF5Yv-97" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-875.6199999999999" y="1770" as="sourcePoint" />
            <mxPoint x="-30" y="1910" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-111" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-103" target="6P7k_oFCu2A5ri-oF5Yv-106" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-116" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-103" target="6P7k_oFCu2A5ri-oF5Yv-115" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-103" value="checkBuildInResExistOrLoaded&lt;br&gt;RenderManager::&lt;br&gt;参数：无&lt;br&gt;检查buildIn feature（共15个）是否有效" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-470" y="1355" width="300" height="70" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-106" value="_checkComposerEffectResExistOrLoaded&lt;br&gt;RenderManager::&lt;br&gt;参数：无&lt;br&gt;检查C槽区effect是否有效" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-590" y="1620" width="300" height="70" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-104" value="&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(248 , 249 , 250) ; display: inline ; float: none&quot;&gt;检查buildIn 及B/C槽区 effect 是否需要更新？RenderManager::m_ShouldRebuildChain = true ：&lt;/span&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(248 , 249 , 250) ; display: inline ; float: none&quot;&gt;none&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-270" y="1470" width="250" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-110" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="wtXymxYHKPod9JYcDsyk-28" target="6P7k_oFCu2A5ri-oF5Yv-104" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="30" y="1475" as="sourcePoint" />
            <mxPoint x="-160" y="1495" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-114" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-55" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-80" y="1655" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-55" value="当curEffect还未建立或需要重载时（发生在第一次进入拍摄页面、构建第一个Effect和新的Effect切换过程）" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-252.5" y="1640" width="152.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-113" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-106" target="6P7k_oFCu2A5ri-oF5Yv-55" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-290" y="1655" as="sourcePoint" />
            <mxPoint x="-77.5" y="1655" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-118" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-115" target="6P7k_oFCu2A5ri-oF5Yv-117" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-115" value="checkouResExistOrLoaded&lt;br&gt;内置xxxFeature::&lt;br&gt;参数：无&lt;br&gt;内置Feature 接口" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-470" y="1210" width="300" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-119" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-117" target="6P7k_oFCu2A5ri-oF5Yv-120" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-320" y="1050" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-117" value="paserFilter&lt;br&gt;内置xxxFeatureParser::&lt;br&gt;参数：无&lt;br&gt;内置Feature 接口" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-470" y="1090" width="300" height="70" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-120" value="BaseParser::parseBase&lt;br&gt;解析算法requirement...&lt;br&gt;BaseParser::parseContent&lt;br&gt;&amp;nbsp;解析content.json中content字段对应clip.json" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="-430" y="980" width="240" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-125" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-123" target="6P7k_oFCu2A5ri-oF5Yv-72" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-127" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-123" target="6P7k_oFCu2A5ri-oF5Yv-126" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-123" value="ParseBase&lt;br&gt;BaseParser::&lt;br&gt;参数：cJSON* (content.json 对应json对象)&lt;br&gt;解析feature模块包content.json文件除content字段外其他内容，如算法requirement，由基类Parser完成。" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="399.25" y="2460" width="260.75" height="90" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-126" value="parseRequirement&lt;br&gt;BaseParser::&lt;br&gt;参数：cJson* reqirementObject(算法字段json对象), BefRequirement&amp;amp; Flag(算法开启标志位)&lt;br&gt;&lt;font color=&quot;#ff0000&quot;&gt;解析算法字段内容，更新开启算法标志位。&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="387.13" y="2610" width="285" height="90" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-167" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-131" target="6P7k_oFCu2A5ri-oF5Yv-132" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-131" value="&lt;font face=&quot;helvetica&quot;&gt;&lt;b style=&quot;background-color: rgb(255 , 255 , 0)&quot;&gt;四、算法检测&lt;br&gt;（进入拍摄页开始持续）&lt;br&gt;&lt;/b&gt;&lt;/font&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2030" y="957" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-135" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-132" target="6P7k_oFCu2A5ri-oF5Yv-134" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-132" value="bef_effect_algorithm_multi_texture_with_params&lt;br&gt;VE API::&lt;br&gt;参数：effect handle,&amp;nbsp; srcTexture, srcTextureCount, bef_algorithm_param* params&lt;br&gt;VE算法检测API接口" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="1940" y="1037" width="330" height="100" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-137" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-134" target="6P7k_oFCu2A5ri-oF5Yv-136" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-134" value="algorithmMultiTexture&lt;br&gt;EffectManager::&lt;br&gt;参数：effect handle,&amp;nbsp; srcTexture, srcTextureCount, bef_algorithm_param* params&lt;br&gt;EffectManager算法检测入口" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="1940" y="1186" width="330" height="100" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-157" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-136" target="6P7k_oFCu2A5ri-oF5Yv-148" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-136" value="createFrameTask&lt;br&gt;AlgorithmSystem::&lt;br&gt;参数：&lt;span&gt;int frameId, Requirement req(算法位), 算法预参数宽/高，m_orientation, m_renderInfo(渲染信息),&amp;nbsp; 传入图像与算法所需图像宽/高方向比例。&lt;br&gt;其中，算法预参数宽/高度是预定义的数据，不同算法有所不同，当需要多个算法时按照策略进行适配；算法位由EffectManager管理并在RenderManager::processTexture中按照已构建feature的算法requirement每一帧更新。&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="1882.5" y="1327" width="445" height="150" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-141" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shape=link;dashed=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-138" target="6P7k_oFCu2A5ri-oF5Yv-140" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-138" target="UD57GQTYyrQhU4ycjeV2-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-138" value="更新effectmanager管理的算法Requirement" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="745" y="1445" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-139" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" parent="1" source="wtXymxYHKPod9JYcDsyk-29" target="6P7k_oFCu2A5ri-oF5Yv-138" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="670" y="1474.9999999999995" as="sourcePoint" />
            <mxPoint x="980" y="1474.9999999999995" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-140" value="mergeRequirement(...)&lt;br&gt;基于已构建feature的算法位更新EffectManager管理的总算法位" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="850" y="1295" width="180" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-145" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-143" target="wtXymxYHKPod9JYcDsyk-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-146" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-143" target="6P7k_oFCu2A5ri-oF5Yv-168" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="740" y="1029.9999999999995" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-143" value="processEvents&lt;br&gt;EffectManager::&lt;br&gt;参数：无&lt;br&gt;分发注册的触发事件（算法结果/Effect初始化......），走进lua回调中" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="379.63" y="1300" width="300" height="80" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-147" value="&lt;br class=&quot;Apple-interchange-newline&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;基础及内置feature 构建过程，这个过程是进入拍摄页面就会进并执行的，比如美颜。这些feature具体包括face_beauty/filter/skintone/facereshape/facemakeupv2/hdrnet/画面调节小项&lt;/span&gt;" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="-870.62" y="1440" width="340.62" height="90" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-155" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-148" target="6P7k_oFCu2A5ri-oF5Yv-150" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-148" value="&lt;span&gt;doExecute&lt;br&gt;AlgorithmFrameTask::&lt;br&gt;参数：EffectManager,&amp;nbsp; CBundle&amp;amp;&amp;nbsp;&lt;br&gt;对当前帧执行算法检测&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="1990" y="1527" width="230" height="70" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-154" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-149" target="6P7k_oFCu2A5ri-oF5Yv-151" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-149" value="&lt;span&gt;processTask&lt;br&gt;AlgorithmBase::&lt;br&gt;参数：AlgorithmFrameTask* frameTask, EffectManager,&amp;nbsp; CpuImageBuffer* imgBuffer.&amp;nbsp;&lt;br&gt;bit对应的算法模块开始执行检测算法&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="1965" y="1727" width="280" height="70" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-156" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-150" target="6P7k_oFCu2A5ri-oF5Yv-149" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-150" value="&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(248 , 249 , 250) ; display: inline ; float: none&quot;&gt;逐个有效 bit 执行算法检测，首先获取当前有效bit对应xxxAlgorithm，然后执行AlgorithmBase::processTask函数，继而下沉到xxxAlgorithm/xxxTask中，获取算法结果。&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1960" y="1637" width="290" height="50" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-153" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-151" target="6P7k_oFCu2A5ri-oF5Yv-152" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-164" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;shape=link;dashed=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-151" target="6P7k_oFCu2A5ri-oF5Yv-162" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1990" y="2037" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-151" value="&lt;span&gt;generateSynTask&lt;br&gt;AlgorithmBase &amp;lt;- xxxAlgorithm::&lt;br&gt;参数：const char* imageData, imgWidth/imgHeight(算法预参数), orientation, CBundle&amp;amp;, Xscale/Yscale(实际图像宽/高与算法预参数比例)&lt;br&gt;bit对应的下沉算法模块 xxxAlgorithm，执行算法绑定返回xxxTask基类。&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="1820" y="1857" width="340" height="110" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-159" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-152" target="6P7k_oFCu2A5ri-oF5Yv-158" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="ah1Y2Np-Znn_RsESn9sr-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-152" target="ah1Y2Np-Znn_RsESn9sr-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-152" value="&lt;span&gt;execute&lt;br&gt;AlgorithmTask::&lt;br&gt;参数：无&lt;br&gt;执行当前算法任务，下沉具体算法 xxxTask，生成算法结果并注册算法结果触发事件。&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="2240" y="1867" width="250" height="90" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-165" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;shape=link;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-158" target="6P7k_oFCu2A5ri-oF5Yv-163" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-158" value="&lt;span&gt;doExecute&lt;br&gt;AlgorithmTask &amp;lt;- xxxTask::&lt;br&gt;参数：无&lt;br&gt;bit对应的下沉算法模块 xxxTask，生成算法结果并注册算法结果触发事件。&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="2240" y="2037" width="250" height="90" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-162" value="&lt;font color=&quot;#ff0000&quot;&gt;算法绑定：&lt;br&gt;为xxxTask绑定相关配置，如输入图像、算法宽/高预参数、实际图像与预参数比例、算法结果结构体指针、算法使用模型...etc。返回xxxTask基类，准备调用AlgorithmTask::execute，执行算法，生成结果并注册触发事件。&lt;br&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="1820" y="2057" width="340" height="110" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-163" value="&lt;span&gt;&lt;font color=&quot;#ff0000&quot;&gt;生成算法结果及注册触发事件&lt;br&gt;event.eventContent: 算法结果结构体&lt;br&gt;event.eventLayer: 事件类型枚举（算法=3）&lt;br&gt;注册上述event到事件系统等待EffectManager::processEvent&lt;/font&gt;&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="2240" y="2210" width="250" height="68" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-189" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-168" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="960" y="889.9999999999995" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-168" value="processNtf&lt;br&gt;BefEventSystem::&lt;br&gt;参数：int maxEventCount&lt;br&gt;事件队列分发所有事件，从BefEventSystem 管理的mapEventConsumers 消费者map获取匹配的回调函数并执行。" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="740" y="990" width="220" height="120" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-179" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-177" target="6P7k_oFCu2A5ri-oF5Yv-176" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-169" value="InitEventSystem&lt;br&gt;BEFEffect::" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="1090" y="990" width="220" height="50" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-170" value="EffectManager&lt;br&gt;EffectManager::&lt;br&gt;无参构造函数&lt;br&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="1090" y="830" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-172" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-171" target="6P7k_oFCu2A5ri-oF5Yv-170" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-171" value="bef_effect_create_handle&lt;br&gt;VE API::&lt;br&gt;参数: bef_effect_handle_t*(由VE分配的handle地址), bool useAmazing&lt;br&gt;初始化effectmanager" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="1090" y="690" width="220" height="70" as="geometry" />
        </mxCell>
        <mxCell id="zsSVkJPb638QE2jcnx0w-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-174" target="6P7k_oFCu2A5ri-oF5Yv-59" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-174" value="&lt;font style=&quot;font-size: 12px&quot;&gt;&lt;font color=&quot;#ff0000&quot; style=&quot;font-size: 12px&quot;&gt;InitEventSystem&lt;br style=&quot;font-size: 11px&quot;&gt;&lt;/font&gt;BEFEffect::&lt;br style=&quot;font-size: 11px&quot;&gt;参数：BES::BefEventSystem*&amp;nbsp;&lt;br style=&quot;font-size: 11px&quot;&gt;初始化事件系统，注册内置消费者函数handle到mapEventConsumers 容器中&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="-430" y="1754" width="170" height="100" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-183" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-176" target="6P7k_oFCu2A5ri-oF5Yv-181" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-176" value="IEventConsumer::addConsumerFunc&lt;br&gt;转&lt;br&gt;IEventConsumer::addConsumer" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="1090" y="1120" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-178" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shape=link;dashed=1;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-177" target="6P7k_oFCu2A5ri-oF5Yv-182" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1380" y="1080" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-177" value="将内置的23个消费者函数handle添加mapEventConsumers容器" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1110" y="1070" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-180" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-169" target="6P7k_oFCu2A5ri-oF5Yv-177" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1200" y="1040" as="sourcePoint" />
            <mxPoint x="1200" y="1120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-181" value="addConsumer&lt;br&gt;BefEventSystem::&lt;br&gt;参数：int eventKey, EventConsumerFunc eventHandler&lt;br&gt;向mapEventConsumers容器注册消费者函数&amp;lt;eventKey, eventHandle&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="1090" y="1205" width="220" height="95" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-182" value="内置消费者函数 &lt;br&gt;BEFEffect::&lt;br&gt;handleDeviceOrientedChangedEvent&lt;br&gt;handleDeviceOrientationEvent&lt;br&gt;handleAudioControlEvent&lt;br&gt;handleAudioVolumeControlEvent&lt;br&gt;handleAudio3DparamControlEvent&lt;br&gt;handleAudioHandFoloowEvent&lt;br&gt;handleReadyEvent&lt;br&gt;handleAudioRecognizeEvent&lt;br&gt;handleAudioRecognizeWordEvent&lt;br&gt;handleARScanEvent&lt;br&gt;handleAudioSamiAedEvent&lt;br&gt;handleAudioVolumeEvent&lt;br&gt;handleAudioOnsetEvent&lt;br&gt;handleAudioToneEvent&lt;br&gt;handleAudioSpectrumEvent&lt;br&gt;handleOneFaceSimilarEevnt&lt;br&gt;handleTwoFaceSimilarEvent&lt;br&gt;handleMemojiEvent&lt;br&gt;handleMergeEndEvent&lt;br&gt;handleHistogramEvent&lt;br&gt;handleScanningArEvent&lt;br&gt;&lt;font color=&quot;#ff3333&quot;&gt;handleEffectEvent&lt;/font&gt;&lt;br&gt;handleGeneralObjectDetectionEvent" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" parent="1" vertex="1">
          <mxGeometry x="1400" y="940" width="220" height="375" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-187" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="6P7k_oFCu2A5ri-oF5Yv-185" target="6P7k_oFCu2A5ri-oF5Yv-188" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="963.75" y="2190" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-185" value="InitEventSystem&lt;br&gt;BEFBaseFeature::&lt;br&gt;参数：BES::BefEventSystem* eventSystem&lt;br&gt;每次构建新的xxxfeature时注册下沉的handlexxxEvent 函数到 BefEventSystem::mapEventConsumers容器中供EffectManager::processEvent回调" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="850" y="2001" width="227.5" height="138" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-188" value="&lt;font color=&quot;#ff0000&quot;&gt;InitEventSystem&lt;br&gt;xxxFeature::&lt;br&gt;参数：&lt;br&gt;xxxFeature注册自己的handlexxxEvent到mapEventConsumers容器。&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="850" y="2214" width="227.5" height="138" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-190" value="&lt;font style=&quot;font-size: 27px&quot;&gt;&lt;b&gt;图标说明：&lt;/b&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;strokeWidth=5;" parent="1" vertex="1">
          <mxGeometry x="-530" y="520" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-192" value="" style="endArrow=classic;html=1;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-495" y="569" as="sourcePoint" />
            <mxPoint x="-405" y="569" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-194" value="主调函数-&amp;gt;被调函数" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-395" y="561" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-195" value="同级被调函数" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-405" y="609" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-196" value="" style="endArrow=classic;html=1;dashed=1;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-495" y="618.4099999999999" as="sourcePoint" />
            <mxPoint x="-405" y="618.4099999999999" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-197" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFCC;" parent="1" vertex="1">
          <mxGeometry x="-505" y="699" width="110" height="50" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-198" value="同色框表示相同逻辑异地说明" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-405" y="719" width="210" height="20" as="geometry" />
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-202" value="" style="endArrow=classic;html=1;dashed=1;shape=link;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-495" y="659" as="sourcePoint" />
            <mxPoint x="-405" y="659" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6P7k_oFCu2A5ri-oF5Yv-204" value="补充说明" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-405" y="649" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="zsSVkJPb638QE2jcnx0w-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.535;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="zsSVkJPb638QE2jcnx0w-1" target="6P7k_oFCu2A5ri-oF5Yv-143" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zsSVkJPb638QE2jcnx0w-1" value="tick&lt;br&gt;RenderManager::&lt;br&gt;参数： float deltaTime&amp;nbsp;&lt;br&gt;时间驱动image2Dmanager，用于从序列帧manager中设置当前渲染帧index，并等待xxxfilter 取用。image2Dmanager序列帧管理涉及feature包括2DV3、通用特效、美妆V2和3DV3的通用序列帧" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="399.63" y="1100" width="280" height="110" as="geometry" />
        </mxCell>
        <mxCell id="zsSVkJPb638QE2jcnx0w-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" parent="1" source="zsSVkJPb638QE2jcnx0w-7" target="6P7k_oFCu2A5ri-oF5Yv-174" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="zsSVkJPb638QE2jcnx0w-7" value="&lt;font style=&quot;font-size: 12px&quot;&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;setConfig&lt;br style=&quot;font-size: 11px&quot;&gt;&lt;/font&gt;BEFEffect::&lt;br style=&quot;font-size: 11px&quot;&gt;参数：Effect_ptr, effectManager&amp;nbsp;&lt;br style=&quot;font-size: 11px&quot;&gt;设置effect相关参数，其中包括初始化序列帧管理模块image2DManger，其由BEFEffect持有。&lt;br&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-673" y="1754" width="203" height="100" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-1" value="renderChain中的feature[i]开始渲染，然后将结果setInputTexture为feature[i+1]等与feature[i]存在link关系的后续feature，并对后续feature 重复 procesNewFrame进行渲染，实现对渲染链RenderChain的遍历" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1470" y="1854" width="200" height="130" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shape=link;dashed=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="wtXymxYHKPod9JYcDsyk-74" target="UD57GQTYyrQhU4ycjeV2-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1389.9988235294127" y="1929.94" as="sourcePoint" />
            <mxPoint x="1494.94" y="1839.94" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="UD57GQTYyrQhU4ycjeV2-4" target="UD57GQTYyrQhU4ycjeV2-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-4" value="&lt;br&gt;RenderManager::buildChainV2 中对m_Renderchain 前后的 feature 构建了 target link 关系&lt;br&gt;m_RenderChain[i] -&amp;gt; addTarget(m_RenderChain[i+1], 0)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1475" y="2103" width="200" height="98" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-5" value="RenderManager::doRender() 进入渲染链执行，其中只对 m_RenderChain[0] 调用其 draw 函数，这是因为在draw 函数执行过程中会跳往 processNewFrame，并在其中进行notifyAllTarget 操作， 它会 基于 target link 关系，把当前target的渲染输出结果 m_pOutputText 通过 SetInputTexture 设置到下一个有link关系的 Target 以作为其输入，然后再次执行该 linked target 的 processNewFrame渲染操作... 不断重复直至所有 target 渲染完成。" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1430" y="2291" width="290" height="170" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-9" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1375" y="2580" width="390" height="820" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shape=link;dashed=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="UD57GQTYyrQhU4ycjeV2-7" target="UD57GQTYyrQhU4ycjeV2-1" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1335" y="2031.75" as="sourcePoint" />
            <mxPoint x="1475" y="1958.25" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-11" value="&lt;font style=&quot;font-size: 23px&quot;&gt;渲染链执行overall&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1410" y="2062" width="200" height="20" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;shape=link;dashed=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" target="UD57GQTYyrQhU4ycjeV2-7" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1570" y="2580" as="sourcePoint" />
            <mxPoint x="1520" y="2500" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-13" value="&lt;font style=&quot;font-size: 23px&quot;&gt;渲染链details&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1375" y="2600" width="155" height="20" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" parent="1" source="UD57GQTYyrQhU4ycjeV2-15" target="wtXymxYHKPod9JYcDsyk-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-15" value="beforeRender&lt;br&gt;RenderManager::&lt;br&gt;参数：src_textureId, src_textureBuffer, dst_id, dst_buffer, image_width/image_height, renderInfo&lt;br&gt;设置渲染链输出纹理buffer" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="696.07" y="1550" width="277.87" height="90" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="UD57GQTYyrQhU4ycjeV2-18" target="UD57GQTYyrQhU4ycjeV2-19" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-18" value="1.&lt;br&gt;&amp;nbsp;renderManager::processTexutre 函数中会执行 beforeRender 预处理，对当前 RenderChain 的头 target 和 尾 target 分别设置输入纹理和输出纹理 m_pOutputTexture；" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1455" y="2630" width="240" height="90" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="UD57GQTYyrQhU4ycjeV2-19" target="UD57GQTYyrQhU4ycjeV2-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-19" value="2.&lt;br&gt;具体的输出纹理设置走到 BEFProtocol::setOutputTexture 中，在其中通过 renderEngine 生成渲染 TextureTarget，可以理解它是 openGL最终渲染输出的纹理 buffer，把这个buffer与输出纹理地址 m_pOutputTexture绑定;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1455" y="2740" width="240" height="90" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="UD57GQTYyrQhU4ycjeV2-20" target="UD57GQTYyrQhU4ycjeV2-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-20" value="3.&lt;br&gt;绑定GL输出纹理后，在每一帧 doRender 中，对当前渲染链节点执行 feature 级别 draw 后， openGL会更新输出buffer，然后向后续渲染target 广播 notifyAllTarget；" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1455" y="2850" width="240" height="90" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="UD57GQTYyrQhU4ycjeV2-22" target="UD57GQTYyrQhU4ycjeV2-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-22" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;4.&lt;br&gt;在notifyAllTarget 中，当前节点会首先拿与 openGL 输出buffer 绑定的m_pOutputTexture，也就是当前节点的输出，然后将其设置给后续的 linked 节点作为它们的输入（一般链式只有一个linked节点）；&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1455" y="2960" width="240" height="90" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="UD57GQTYyrQhU4ycjeV2-23" target="UD57GQTYyrQhU4ycjeV2-26" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-23" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;5.&lt;br&gt;后续节点拿到输入 texture 后，重新进行 processNewFrame-&amp;gt;...-&amp;gt; draw 进行后续节点各自的渲染工作；&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1455" y="3070" width="240" height="90" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="UD57GQTYyrQhU4ycjeV2-26" target="UD57GQTYyrQhU4ycjeV2-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-26" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;6.&lt;br&gt;重复上述过程 3-5 直到渲染链遍历结束；&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1455" y="3180" width="240" height="90" as="geometry" />
        </mxCell>
        <mxCell id="UD57GQTYyrQhU4ycjeV2-28" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;7.&lt;br&gt;doRender结束会执行一次afterRender 用于执行 imageManager / textureManager 相关的内存释放清理。&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1455" y="3290" width="240" height="90" as="geometry" />
        </mxCell>
        <mxCell id="ah1Y2Np-Znn_RsESn9sr-2" value="&lt;span&gt;SetResult&lt;br&gt;xxxAlgorithm::&lt;br&gt;参数：CBundle &amp;amp; result&lt;br&gt;task 生成的算法结果setHandle压入当前帧的 bundle，等待后续被getHandle取用。&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="2590" y="1867" width="250" height="90" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
